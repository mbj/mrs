# Allowed duplicate crate versions for clippy::multiple_crate_versions lint
#
# These duplicates are caused by transitive dependencies that cannot be
# resolved without waiting for upstream crates to update their dependencies.

allowed-duplicate-crates = [
    # AWS SDK still uses http 0.2 internally, while reqwest/hyper use http 1.x
    # Source: aws-smithy-* crates depend on http 0.2, our direct deps use http 1.x
    # Tracking: https://github.com/awslabs/aws-sdk-rust/issues/977
    "http",
    "http-body",

    # AWS SDK's lru crate uses hashbrown 0.15 (foldhash 0.1),
    # while sqlx/serde_json/indexmap use hashbrown 0.16 (foldhash 0.2)
    # Source: aws-sdk-s3 -> lru -> hashbrown 0.15 -> foldhash 0.1
    "foldhash",
    "hashbrown",

    # sqlx (upstream) uses rand 0.8, while pg-ephemeral uses rand 0.10
    # Source: sqlx-postgres -> rand 0.8, pg-ephemeral -> rand 0.10
    # Note: We keep sqlx close to upstream to ease future updates
    "rand",
    "rand_core",
    "rand_chacha",

    # Transitive from rand 0.8/0.10 split, plus ring (crypto) uses getrandom 0.2
    # Source: rand 0.8 -> getrandom 0.2, rand 0.10 -> getrandom 0.4
    "getrandom",

    # rand 0.10 -> chacha20 -> cpufeatures 0.3, while aes/sha1/sha2 use cpufeatures 0.2
    # Stable releases of aes/sha1/sha2 with cpufeatures 0.3 are not yet available
    "cpufeatures",

    # sqlx uses webpki-roots 0.26 which internally depends on webpki-roots 1.0
    # Source: sqlx-core -> webpki-roots 0.26 -> webpki-roots 1.0
    # Note: We keep sqlx close to upstream to ease future updates
    "webpki-roots",

    # We use nom 8 while most of the ecosystem still depends on nom 7
    # Source: ociman/pg-ephemeral -> nom 8, transitive deps -> nom 7
    "nom",

    # toml_edit uses toml_datetime 0.7 while toml uses 0.6
    # Source: manager -> toml_edit -> toml_datetime 0.7, toml -> toml_datetime 0.6
    "toml_datetime",

    # jni (Android support in rustls-platform-verifier) uses thiserror 1.x
    # while our code uses thiserror 2.x. Android-only dep, not used on Linux.
    # Source: rustls-platform-verifier -> jni -> thiserror 1.x
    "thiserror",
    "thiserror-impl",

    # libredox 0.1.12 requires redox_syscall 0.7, while other crates still use 0.5
    # Source: filetime/redox_users/whoami -> libredox 0.1.12 -> redox_syscall 0.7
    "redox_syscall",

    # Windows platform crates - multiple versions pulled by various dependencies
    # (ring, tokio, rustls, aws-sdk, zip, etc.) targeting different Windows APIs
    # These are platform-specific and don't affect Linux builds, but clippy
    # still reports them. Common in the Rust ecosystem due to gradual migrations.
    "windows-sys",
    "windows-targets",
    "windows_aarch64_gnullvm",
    "windows_aarch64_msvc",
    "windows_i686_gnu",
    "windows_i686_gnullvm",
    "windows_i686_msvc",
    "windows_x86_64_gnu",
    "windows_x86_64_gnullvm",
    "windows_x86_64_msvc",
]
