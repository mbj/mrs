# npm Distribution for pg-ephemeral

This directory contains the npm package configuration for distributing pg-ephemeral binaries via npm.

## Package Structure

### Main Package: `pg-ephemeral`

The main package (`package.json` in this directory) provides:
- A wrapper script (`bin/pg-ephemeral.js`) that detects the platform and executes the appropriate binary
- Optional dependencies on platform-specific packages

### Platform-Specific Packages

Platform packages are generated by the Rust manager binary and published separately:
- `@pg-ephemeral/linux-x64` - `x86_64-unknown-linux-gnuÂ´
- `@pg-ephemeral/linux-arm64` - `aarch64-unknown-linux-gnu`
- `@pg-ephemeral/darwin-arm64` - `aarch64-apple-darwin`

Each platform package contains:
- The compiled `pg-ephemeral` binary for that platform
- A `package.json` with platform constraints (`os`, `cpu` fields)

## Installation

Users can install pg-ephemeral via npm:

```bash
npm install pg-ephemeral
```

npm will automatically install the correct platform-specific package based on the user's system.

## Usage

After installation, users can run:

```bash
npx pg-ephemeral <command>
```

Or if installed globally:

```bash
npm install -g pg-ephemeral
pg-ephemeral <command>
```

## Publishing

All publishing is handled by the Rust manager binary, which:
1. Builds binaries for all supported platforms
2. Generates `package.json` files for platform-specific packages
3. Publishes platform-specific packages to npm
4. Updates and publishes the main wrapper package

## Supported Platforms

- Linux x64 (x86_64-unknown-linux-gnu)
- Linux ARM64 (aarch64-unknown-linux-gnu)
- macOS ARM64 (aarch64-apple-darwin)
